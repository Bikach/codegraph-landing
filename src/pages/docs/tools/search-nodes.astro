---
import DocsLayout from '../../../layouts/Docs.astro';
import CodeBlock from '../../../components/docs/CodeBlock.astro';
import Callout from '../../../components/docs/Callout.astro';
import PrevNext from '../../../components/docs/PrevNext.astro';
import ScreenshotPlaceholder from '../../../components/docs/ScreenshotPlaceholder.astro';
---

<DocsLayout title="search_nodes">
  <h1 class="text-4xl font-bold text-text-primary mb-4">search_nodes</h1>
  <p class="text-xl text-text-secondary mb-8">
    Search for nodes (classes, interfaces, functions, properties) by name or pattern in the code graph.
  </p>

  <section class="mb-12">
    <h2 class="text-2xl font-semibold text-text-primary mb-4">Description</h2>
    <p class="text-text-secondary mb-4">
      The <code class="text-primary bg-bg-subtle px-2 py-1 rounded">search_nodes</code> tool allows you to search through your indexed codebase for specific code elements. It supports partial matching by default, making it easy to find classes, functions, or interfaces even when you only remember part of the name.
    </p>
    <p class="text-text-secondary">
      Results are returned in a compact format: <code class="text-primary bg-bg-subtle px-2 py-1 rounded">type | Name | visibility | filePath:line</code>
    </p>
  </section>

  <section class="mb-12">
    <h2 class="text-2xl font-semibold text-text-primary mb-4">Parameters</h2>
    <div class="overflow-x-auto">
      <table class="w-full text-sm text-left text-text-secondary">
        <thead class="text-xs uppercase bg-bg-subtle text-text-muted">
          <tr>
            <th class="py-3 px-4 rounded-tl-lg">Parameter</th>
            <th class="py-3 px-4">Type</th>
            <th class="py-3 px-4">Required</th>
            <th class="py-3 px-4 rounded-tr-lg">Description</th>
          </tr>
        </thead>
        <tbody class="bg-bg-subtle">
          <tr class="border-b border-border">
            <td class="py-3 px-4 font-medium text-text-primary"><code class="text-primary">query</code></td>
            <td class="py-3 px-4">string</td>
            <td class="py-3 px-4"><span class="text-danger">Yes</span></td>
            <td class="py-3 px-4">Search query (name or pattern to match)</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-3 px-4 font-medium text-text-primary"><code class="text-primary">node_types</code></td>
            <td class="py-3 px-4">array</td>
            <td class="py-3 px-4"><span class="text-text-muted">No</span></td>
            <td class="py-3 px-4">Filter by node types: <code class="text-xs bg-bg-subtle px-1 rounded text-primary">class</code>, <code class="text-xs bg-bg-subtle px-1 rounded text-primary">interface</code>, <code class="text-xs bg-bg-subtle px-1 rounded text-primary">function</code>, <code class="text-xs bg-bg-subtle px-1 rounded text-primary">property</code>, <code class="text-xs bg-bg-subtle px-1 rounded text-primary">object</code></td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-3 px-4 font-medium text-text-primary"><code class="text-primary">exact_match</code></td>
            <td class="py-3 px-4">boolean</td>
            <td class="py-3 px-4"><span class="text-text-muted">No</span></td>
            <td class="py-3 px-4">If true, exact match. If false (default), partial match using CONTAINS</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-3 px-4 font-medium text-text-primary"><code class="text-primary">limit</code></td>
            <td class="py-3 px-4">integer</td>
            <td class="py-3 px-4"><span class="text-text-muted">No</span></td>
            <td class="py-3 px-4">Maximum number of results (1-100, default: 20)</td>
          </tr>
          <tr>
            <td class="py-3 px-4 font-medium text-text-primary"><code class="text-primary">project_path</code></td>
            <td class="py-3 px-4">string</td>
            <td class="py-3 px-4"><span class="text-text-muted">No</span></td>
            <td class="py-3 px-4">Filter by project path. If not provided, searches all indexed projects</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="mb-12">
    <h2 class="text-2xl font-semibold text-text-primary mb-4">Example</h2>
    <p class="text-text-secondary mb-4">
      Ask Claude to search for nodes by name or pattern. Results show type, name, visibility, and location.
    </p>
    <ScreenshotPlaceholder
      path="tools/search-nodes-example.png"
      alt="search_nodes tool invocation and output"
      caption="Searching for nodes in the codebase"
    />
  </section>

  <section class="mb-12">
    <h2 class="text-2xl font-semibold text-text-primary mb-4">Use Cases</h2>
    <ul class="space-y-3 text-text-secondary">
      <li class="flex items-start gap-3">
        <span class="text-secondary mt-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </span>
        <span><strong class="text-text-primary">Code discovery:</strong> Find all classes, functions, or interfaces matching a pattern when exploring an unfamiliar codebase</span>
      </li>
      <li class="flex items-start gap-3">
        <span class="text-secondary mt-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </span>
        <span><strong class="text-text-primary">Refactoring preparation:</strong> Identify all nodes that might need to be updated before a large-scale refactoring</span>
      </li>
      <li class="flex items-start gap-3">
        <span class="text-secondary mt-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </span>
        <span><strong class="text-text-primary">Architecture analysis:</strong> Find all services, repositories, or controllers to understand the project structure</span>
      </li>
      <li class="flex items-start gap-3">
        <span class="text-secondary mt-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </span>
        <span><strong class="text-text-primary">Naming consistency:</strong> Check if similar concepts are named consistently across the codebase</span>
      </li>
    </ul>
  </section>

  <Callout type="tip" title="Pro Tip">
    Start with a broad partial match search, then narrow down using <code class="text-primary">node_types</code> or <code class="text-primary">exact_match</code> to find exactly what you need.
  </Callout>

  <PrevNext
    prev={{ title: "/codegraph:status", href: "/docs/commands/status" }}
    next={{ title: "get_callers", href: "/docs/tools/get-callers" }}
  />
</DocsLayout>
