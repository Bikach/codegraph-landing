---
import DocsLayout from '../../../layouts/Docs.astro';
import CodeBlock from '../../../components/docs/CodeBlock.astro';
import Callout from '../../../components/docs/Callout.astro';
import PrevNext from '../../../components/docs/PrevNext.astro';
---

<DocsLayout title="/codegraph:setup">
  <h1 class="text-4xl font-bold text-white mb-4">/codegraph:setup</h1>
  <p class="text-xl text-gray-400 mb-8">
    Starts Neo4j Docker container and prepares the database for CodeGraph.
  </p>

  <h2 class="text-2xl font-semibold text-white mt-10 mb-4">Overview</h2>
  <p class="text-gray-300 mb-4">
    The <code class="bg-gray-800 px-2 py-1 rounded text-emerald-400">/codegraph:setup</code> command initializes the Neo4j graph database environment required by CodeGraph. This is the first command you should run when setting up CodeGraph for a new project.
  </p>

  <h2 class="text-2xl font-semibold text-white mt-10 mb-4">What it does</h2>
  <ul class="list-disc list-inside text-gray-300 space-y-2 mb-6">
    <li>Pulls the official Neo4j Docker image if not already present</li>
    <li>Starts a Neo4j container with the appropriate configuration</li>
    <li>Configures the database with optimal settings for CodeGraph</li>
    <li>Sets up authentication and network bindings</li>
    <li>Verifies the database is ready to accept connections</li>
  </ul>

  <h2 class="text-2xl font-semibold text-white mt-10 mb-4">Usage</h2>
  <p class="text-gray-300 mb-4">
    Simply invoke the command in your Claude Code session:
  </p>

  <CodeBlock
    code="/codegraph:setup"
    lang="bash"
    title="Claude Code"
  />

  <h2 class="text-2xl font-semibold text-white mt-10 mb-4">Example Output</h2>
  <CodeBlock
    code={`Starting Neo4j setup...
Pulling Neo4j image (if needed)...
Starting Neo4j container...
Waiting for Neo4j to be ready...
Neo4j is now running and ready!

Container: codegraph-neo4j
Bolt URL: bolt://localhost:7687
Browser: http://localhost:7474`}
    lang="bash"
    title="Output"
  />

  <Callout type="tip" title="Docker Required">
    This command requires Docker to be installed and running on your machine. Make sure the Docker daemon is active before running this command.
  </Callout>

  <h2 class="text-2xl font-semibold text-white mt-10 mb-4">Container Configuration</h2>
  <p class="text-gray-300 mb-4">
    The setup command creates a container with the following default configuration:
  </p>

  <div class="overflow-x-auto mb-6">
    <table class="w-full text-sm text-left text-gray-300">
      <thead class="text-xs uppercase bg-gray-800 text-gray-400">
        <tr>
          <th class="px-4 py-3 rounded-tl-lg">Setting</th>
          <th class="px-4 py-3 rounded-tr-lg">Value</th>
        </tr>
      </thead>
      <tbody class="bg-gray-900">
        <tr class="border-b border-gray-800">
          <td class="px-4 py-3 font-medium text-white">Container Name</td>
          <td class="px-4 py-3"><code class="text-emerald-400">codegraph-neo4j</code></td>
        </tr>
        <tr class="border-b border-gray-800">
          <td class="px-4 py-3 font-medium text-white">Bolt Port</td>
          <td class="px-4 py-3"><code class="text-emerald-400">7687</code></td>
        </tr>
        <tr class="border-b border-gray-800">
          <td class="px-4 py-3 font-medium text-white">HTTP Port</td>
          <td class="px-4 py-3"><code class="text-emerald-400">7474</code></td>
        </tr>
        <tr>
          <td class="px-4 py-3 font-medium text-white">Authentication</td>
          <td class="px-4 py-3"><code class="text-emerald-400">Disabled (local development)</code></td>
        </tr>
      </tbody>
    </table>
  </div>

  <Callout type="info" title="Persistent Data">
    The Neo4j data is stored in a Docker volume, so your indexed code graph persists between container restarts.
  </Callout>

  <h2 class="text-2xl font-semibold text-white mt-10 mb-4">Next Steps</h2>
  <p class="text-gray-300 mb-4">
    After setting up Neo4j, you can index your codebase using the <a href="/docs/commands/index-cmd" class="text-emerald-400 hover:text-emerald-300 underline">/codegraph:index</a> command.
  </p>

  <PrevNext
    prev={{ title: "Installation", href: "/docs/installation" }}
    next={{ title: "/codegraph:index", href: "/docs/commands/index-cmd" }}
  />
</DocsLayout>
