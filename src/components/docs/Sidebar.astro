---
interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

interface NavItem {
  label: string;
  href: string;
}

interface NavSection {
  title?: string;
  items: NavItem[];
}

const navigation: NavSection[] = [
  {
    items: [
      { label: "Getting Started", href: "/docs/getting-started" },
      { label: "Installation", href: "/docs/installation" },
    ],
  },
  {
    title: "Commands",
    items: [
      { label: "/codegraph:setup", href: "/docs/commands/setup" },
      { label: "/codegraph:index", href: "/docs/commands/index-cmd" },
      { label: "/codegraph:status", href: "/docs/commands/status" },
    ],
  },
  {
    title: "MCP Tools",
    items: [
      { label: "search_nodes", href: "/docs/tools/search-nodes" },
      { label: "get_callees", href: "/docs/tools/get-callees" },
      { label: "get_neighbors", href: "/docs/tools/get-neighbors" },
      { label: "get_impact", href: "/docs/tools/get-impact" },
      { label: "find_path", href: "/docs/tools/find-path" },
      { label: "get_file_symbols", href: "/docs/tools/get-file-symbols" },
    ],
  },
  {
    title: "LSP Tools",
    items: [
      { label: "incomingCalls", href: "/docs/lsp/incoming-calls" },
      { label: "goToImplementation", href: "/docs/lsp/go-to-implementation" },
    ],
  },
  {
    title: "Languages",
    items: [
      { label: "Kotlin", href: "/docs/languages/kotlin" },
      { label: "Java", href: "/docs/languages/java" },
    ],
  },
  {
    items: [
      { label: "Benchmark", href: "/docs/benchmark" },
    ],
  },
];

function isActive(href: string): boolean {
  return currentPath === href || currentPath === href + "/";
}
---

<aside class="w-64 bg-gray-900 border-r border-gray-800 h-screen overflow-y-auto sticky top-0">
  <nav class="p-4 space-y-6">
    {navigation.map((section) => (
      <div>
        {section.title && (
          <h3 class="text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2 px-3">
            {section.title}
          </h3>
        )}
        <ul class="space-y-1">
          {section.items.map((item) => (
            <li>
              <a
                href={item.href}
                class:list={[
                  "block px-3 py-2 rounded-md text-sm transition-colors duration-150",
                  isActive(item.href)
                    ? "bg-purple-600/20 text-purple-400 border-l-2 border-purple-500"
                    : "text-gray-400 hover:text-gray-200 hover:bg-gray-800",
                ]}
              >
                {item.label}
              </a>
            </li>
          ))}
        </ul>
      </div>
    ))}
  </nav>
</aside>

<style>
  aside::-webkit-scrollbar {
    width: 6px;
  }

  aside::-webkit-scrollbar-track {
    background: transparent;
  }

  aside::-webkit-scrollbar-thumb {
    background: #374151;
    border-radius: 3px;
  }

  aside::-webkit-scrollbar-thumb:hover {
    background: #4b5563;
  }
</style>
