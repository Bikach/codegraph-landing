---
interface FAQItem {
  question: string;
  answer: string;
}

const faqs: FAQItem[] = [
  {
    question: "Does it work offline?",
    answer: "Yes, everything runs locally. Neo4j runs in Docker on your machine, and all indexing happens locally. No data is sent to external servers."
  },
  {
    question: "What about private codebases?",
    answer: "Completely private. CodeGraph runs 100% locally - your code never leaves your machine. The Neo4j graph is stored in a local Docker volume."
  },
  {
    question: "How long does indexing take?",
    answer: "Depends on codebase size. A typical 50k LOC Kotlin project takes about 30-60 seconds to index. You only need to re-index when your code structure changes significantly."
  },
  {
    question: "What's the performance impact?",
    answer: "Minimal. Indexing is a one-time operation. Graph queries are milliseconds. The MCP server has negligible memory footprint."
  },
  {
    question: "Is it free?",
    answer: "Yes, CodeGraph is free and open source (MIT License). Neo4j Community Edition is also free."
  },
  {
    question: "Which IDE/editors are supported?",
    answer: "CodeGraph works with Claude Code CLI. It's IDE-agnostic - as long as you can run Claude Code, you can use CodeGraph."
  }
];
---

<section id="faq" class="py-24 bg-gray-950">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl sm:text-4xl font-bold text-white mb-4">
        Frequently Asked Questions
      </h2>
      <p class="text-gray-400 text-lg">
        Everything you need to know about CodeGraph
      </p>
    </div>

    <div class="space-y-4">
      {faqs.map((faq, index) => (
        <div
          class="faq-item border border-gray-800 rounded-lg overflow-hidden bg-gray-900/50 hover:border-gray-700 transition-colors"
          data-faq-index={index}
        >
          <button
            type="button"
            class="faq-toggle w-full px-6 py-5 text-left flex items-center justify-between gap-4 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-inset"
            aria-expanded="false"
            aria-controls={`faq-answer-${index}`}
          >
            <span class="text-lg font-medium text-white">{faq.question}</span>
            <span class="faq-icon flex-shrink-0 w-6 h-6 flex items-center justify-center text-gray-400 transition-transform duration-200">
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 6v12m6-6H6"
                />
              </svg>
            </span>
          </button>
          <div
            id={`faq-answer-${index}`}
            class="faq-answer hidden px-6 pb-5"
          >
            <p class="text-gray-400 leading-relaxed">{faq.answer}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .faq-item.open .faq-icon {
    transform: rotate(45deg);
  }

  .faq-item.open .faq-icon svg path {
    d: path("M6 12h12");
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out, padding 0.3s ease-out;
  }

  .faq-item.open .faq-answer {
    max-height: 500px;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const faqItems = document.querySelectorAll('.faq-item');

    faqItems.forEach((item) => {
      const toggle = item.querySelector('.faq-toggle');
      const answer = item.querySelector('.faq-answer');

      if (toggle && answer) {
        toggle.addEventListener('click', () => {
          const isOpen = item.classList.contains('open');

          // Close all other items
          faqItems.forEach((otherItem) => {
            if (otherItem !== item) {
              otherItem.classList.remove('open');
              const otherToggle = otherItem.querySelector('.faq-toggle');
              const otherAnswer = otherItem.querySelector('.faq-answer');
              if (otherToggle) otherToggle.setAttribute('aria-expanded', 'false');
              if (otherAnswer) otherAnswer.classList.add('hidden');
            }
          });

          // Toggle current item
          if (isOpen) {
            item.classList.remove('open');
            toggle.setAttribute('aria-expanded', 'false');
            answer.classList.add('hidden');
          } else {
            item.classList.add('open');
            toggle.setAttribute('aria-expanded', 'true');
            answer.classList.remove('hidden');
          }
        });
      }
    });
  });
</script>
